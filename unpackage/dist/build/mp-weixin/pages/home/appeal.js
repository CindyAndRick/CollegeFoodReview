(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/appeal"],{"06b5":function(e,t,n){},"0ff2":function(e,t,n){"use strict";(function(e){n("4a2a");i(n("66fd"));var t=i(n("aee9"));function i(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},"365b":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{informShow:{time:"00",pictureUrl:"../../../../static/icons/news-active.png"},reportList:[{reason:"00",detail:"000",pictureList:"000",time:"00"}],fileNum:0,formData:{userId:"",reason:"",detail:"",images:[],tmp_images:[]},result:{},rules:{reason:{rules:[{required:!0,errorMessage:"理由不能为空"}]},detail:{rules:[{required:!0,errorMessage:"详细信息不能为空"}]}}}},onLoad:function(t){var n=this;this.formData.userId=t.id,this.informShow.time=this.dateTimeStr("y-m-d h:i"),e.request({url:"http://124.71.170.100/index.php/index/getReport",method:"GET",data:{id:this.formData.userId},success:function(e){console.log("获取成功"+e),n.reportList=e.data.data.reportList},fail:function(){console.log("获取失败")}})},methods:{selectFile:function(t){e.showToast({title:"选择成功",icon:"none"}),this.formData.filesList[this.fileNum]=t.tempFilePaths,this.fileNum=this.fileNum+1},dateTimeStr:function(e){console.log(Date());var t=new Date,n=t.getFullYear(),i=t.getMonth()+1,o=t.getDate(),a=t.getHours()<10?"0"+t.getHours():t.getHours(),r=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return i>=1&&i<=9&&(i="0"+i),o>=0&&o<=9&&(o="0"+o),-1!=e.indexOf("y")&&(e=e.replace("y",n)),-1!=e.indexOf("m")&&(e=e.replace("m",i)),-1!=e.indexOf("d")&&(e=e.replace("d",o)),-1!=e.indexOf("h")&&(e=e.replace("h",a)),-1!=e.indexOf("i")&&(e=e.replace("i",r)),-1!=e.indexOf("s")&&(e=e.replace("s",s)),e},submitForm:function(t){var n=this;this.$refs[t].validate().then((function(t){e.request({url:"http://124.71.170.100/index.php/index/appeal",method:"POST",data:{id:n.formData.userId,reason:n.formData.reason,detail:n.formData.detail,pictureList:n.formData.tmp_images,time:(new Date).getTime()},success:function(t){console.log("提交成功",t),e.showToast({title:"提交成功",icon:"none",mask:"true"}),e.redirectTo({url:"../login/login"})},fail:function(){console.log("提交失败")}}),console.log("姓名："+n.informShow.userName),console.log("举报原因："+n.formData.reason),console.log("具体理由："+n.formData.detail),console.log("照片列表："+n.formData.tmp_images),console.log("表单提交")}))},selectImage:function(e){var t=this;console.log("选择图片",e),t.formData.images=[];for(var n=0;n<t.formData.tmp_images.length;n++){var i={url:t.formData.tmp_images[n]};t.formData.images.push(i)}for(var o=0;o<e.tempFilePaths.length;o++)t.$OBS.myUploadFile((new Date).getTime()+e.tempFiles[o].name,e.tempFilePaths[o],e.tempFiles[o].fileType,"se-report").then((function(e){console.log("success",e),t.formData.tmp_images.push(e),t.formData.images=[];for(var n=0;n<t.formData.tmp_images.length;n++){var i={url:t.formData.tmp_images[n]};t.formData.images.push(i)}}))},deleteImage:function(e){console.log(e),console.log(this.formData.images);for(var t=0;t<this.formData.tmp_images.length;t++)this.formData.tmp_images[t]==e.tempFilePath&&this.formData.tmp_images.splice(t,1)},concelSubmit:function(){console.log("取消提交"),e.showToast({title:"取消成功",icon:"none",mask:"true"}),e.redirectTo({url:"../login/login"})}}};t.default=n}).call(this,n("543d")["default"])},"3e28":function(e,t,n){"use strict";n.r(t);var i=n("365b"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},"5a69":function(e,t,n){"use strict";var i=n("06b5"),o=n.n(i);o.a},"74bb":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={uniCard:function(){return n.e("uni_modules/uni-card/components/uni-card/uni-card").then(n.bind(null,"1a0f"))},uniForms:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(n.bind(null,"9d30"))},uniSection:function(){return n.e("components/uni-section/uni-section").then(n.bind(null,"b506"))},uniFormsItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(n.bind(null,"b4d1"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"8b0a"))},uniFilePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(n.bind(null,"cc85"))}},o=function(){var e=this,t=e.$createElement;e._self._c},a=[]},aee9:function(e,t,n){"use strict";n.r(t);var i=n("74bb"),o=n("3e28");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("5a69");var r,s=n("f0c5"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=u.exports}},[["0ff2","common/runtime","common/vendor"]]]);