(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/friends"],{2545:function(e,n,t){"use strict";t.r(n);var i=t("39c1"),o=t("3481");for(var a in o)"default"!==a&&function(e){t.d(n,e,(function(){return o[e]}))}(a);t("3696");var s,d=t("f0c5"),u=Object(d["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);n["default"]=u.exports},3481:function(e,n,t){"use strict";t.r(n);var i=t("b485"),o=t.n(i);for(var a in i)"default"!==a&&function(e){t.d(n,e,(function(){return i[e]}))}(a);n["default"]=o.a},3696:function(e,n,t){"use strict";var i=t("f41e"),o=t.n(i);o.a},"39c1":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return i}));var i={uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,"347b"))},uniPopupMessage:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-popup/components/uni-popup-message/uni-popup-message")]).then(t.bind(null,"4c7c"))},uniPopupDialog:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(t.bind(null,"39fc"))},uniList:function(){return t.e("uni_modules/uni-list/components/uni-list/uni-list").then(t.bind(null,"7154"))},uniListChat:function(){return t.e("uni_modules/uni-list/components/uni-list-chat/uni-list-chat").then(t.bind(null,"69c9"))},uniLoadMore:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(t.bind(null,"b4b9"))},uniSwipeAction:function(){return t.e("uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action").then(t.bind(null,"88b4"))},uniSwipeActionItem:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item")]).then(t.bind(null,"7235"))},uniListItem:function(){return t.e("uni_modules/uni-list/components/uni-list-item/uni-list-item").then(t.bind(null,"81b3"))}},o=function(){var e=this,n=e.$createElement;e._self._c},a=[]},b485:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={data:function(){return{headMessage:{msgType:"info",messageText:"聊天信息加载中"},myInfo:{myId:"50"},newFriendsList:[],isShowContent:!0,contentNew:{contentnomore:"暂无好友申请"},dealIndex:"1",answer:"1",friendList:[],contentDown:{contentnomore:"没有更多好友啦"},options:[{text:"取消",style:{backgroundColor:"#007aff"}},{text:"删除",style:{backgroundColor:"#dd524d"}}]}},onShow:function(){var n=this;e.getStorage({key:"userInfo",success:function(t){console.log(t.data.id),n.myInfo.myId=t.data.id,e.request({url:"http://124.71.170.100/index.php/index/getFriendList",method:"GET",header:{"content-type":"application/w-xxx-form-unlencoded"},data:{id:n.myInfo.myId},success:function(e){console.log("获取好友列表成功"+e.data.data.friendList),n.friendList=e.data.data.friendList},fail:function(){console.log("获取好友列表失败")}}),e.request({url:"http://124.71.170.100/index.php/index/getFriendRequest",method:"GET",header:{"content-type":"application/w-xxx-form-unlencoded"},data:{id:n.myInfo.myId},success:function(e){console.log("获取好友申请列表成功"+e.data.data.requestList);var t=e.data.data.requestList.length;n.newFriendsList=[],n.isShowContent=!(t>=1);for(var i=0;i<t;i++){var o={id:e.data.data.requestList[i].id,avatarUrl:e.data.data.requestList[i].avatarUrl,nickName:e.data.data.requestList[i].nickName,detail:e.data.data.requestList[i].detail,isShow:!0};n.newFriendsList.push(o)}},fail:function(){console.log("获取好友申请列表失败")}})}})},methods:{navigateTo:function(n){e.navigateTo({url:n})},agreeApl:function(){var n=this;e.showLoading({title:"发送中"}),this.headMessage.messageText="添加成功",this.headMessage.msgType="success",this.answer=1,setTimeout((function(){e.hideLoading(),e.request({url:"http://124.71.170.100/index.php/index/confirmFriendRequest",method:"POST",header:{"content-type":"application/json"},data:{id:n.myInfo.myId,otherUserId:n.newFriendsList[n.dealIndex].id,add:n.answer},success:function(e){n.getData(),console.log("好友申请反馈成功"+e.data.code)},fail:function(){console.log("好友申请反馈失败")}}),n.$refs.message.open()}),1e3)},rejectApl:function(){var n=this;e.showLoading({title:"发送中"}),this.headMessage.messageText="拒绝成功",this.headMessage.msgType="warn",this.answer=0,setTimeout((function(){e.hideLoading(),e.request({url:"http://124.71.170.100/index.php/index/confirmFriendRequest",method:"POST",header:{"content-type":"application/json"},data:{id:n.myInfo.myId,otherUserId:n.newFriendsList[n.dealIndex].id,add:n.answer},success:function(e){n.getData(),console.log("好友申请反馈成功"+e.data.code)},fail:function(){console.log("好友申请反馈失败")}}),n.$refs.message.open()}),1e3)},continueJudge:function(){this.$refs.Reject_Agree.open()},newFriendClick:function(e){console.log(this.newFriendsList[e].id+"被点击了"),this.$refs.getBack.open(),this.dealIndex=e},firendClick:function(n){console.log(n.id+"被点击了"),e.navigateTo({url:"./homepage?id="+n.id})},friendDelete:function(n,t){var i=this;1==n.index&&(e.showLoading({title:"正在删除"}),i.headMessage.messageText="删除成功",i.headMessage.msgType="warn",setTimeout((function(){e.hideLoading(),e.request({url:"http://124.71.170.100/index.php/index/deleteFriend",method:"POST",header:{"content-type":"application/json"},data:{id:i.myInfo.myId,friendId:t},success:function(e){console.log("删除好友成功"+e.data.code),i.getData(),console.log(t),console.log(i.myInfo.myId)},fail:function(){console.log("删除好友失败")}}),i.$refs.message.open()}),1e3))},back:function(){console.log("返回被点击")},getData:function(){var n=this;e.request({url:"http://124.71.170.100/index.php/index/getFriendList",method:"GET",header:{"content-type":"application/w-xxx-form-unlencoded"},data:{id:this.myInfo.myId},success:function(e){console.log("获取好友列表成功"+e.data.data.friendList),n.friendList=e.data.data.friendList},fail:function(){console.log("获取好友列表失败")}}),e.request({url:"http://124.71.170.100/index.php/index/getFriendRequest",method:"GET",header:{"content-type":"application/w-xxx-form-unlencoded"},data:{id:this.myInfo.myId},success:function(e){console.log("获取好友申请列表成功"+e.data.data.requestList);var t=e.data.data.requestList.length;n.isShowContent=!(t>=1),n.newFriendsList=[];for(var i=0;i<t;i++){var o={id:e.data.data.requestList[i].id,avatarUrl:e.data.data.requestList[i].avatarUrl,nickName:e.data.data.requestList[i].nickName,detail:e.data.data.requestList[i].detail,isShow:!0};n.newFriendsList.push(o)}},fail:function(){console.log("获取好友申请列表失败")}})},change:function(){}}};n.default=t}).call(this,t("543d")["default"])},dcad:function(e,n,t){"use strict";(function(e){t("4a2a");i(t("66fd"));var n=i(t("2545"));function i(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t("543d")["createPage"])},f41e:function(e,n,t){}},[["dcad","common/runtime","common/vendor"]]]);