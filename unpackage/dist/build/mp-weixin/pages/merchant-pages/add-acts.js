(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/merchant-pages/add-acts"],{"6ab8":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uniForms:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(n.bind(null,"9d30"))},uniSection:function(){return n.e("components/uni-section/uni-section").then(n.bind(null,"b506"))},uniFormsItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(n.bind(null,"b4d1"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"8b0a"))},uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,"24d3"))},uniFilePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(n.bind(null,"cc85"))}},i=function(){var t=this,e=t.$createElement;t._self._c},o=[]},7256:function(t,e,n){"use strict";(function(t){n("4a2a");a(n("66fd"));var e=a(n("c78a"));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},"81f8":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{userInfo:{},customFormData:{name:"",avtivityId:"",intro:"",startTime:"",endTime:"",picture:[],slogan:"",last_startTime:"",last_endTime:""},nowdate:"",customRules:{name:{rules:[{required:!0,errorMessage:"活动名称不能为空"}]},introduction:{rules:[{required:!0,errorMessage:"活动介绍不能为空"}]},slogan:{rules:[{required:!0,errorMessage:"活动标语不能为空"}]},startTime:{rules:[{required:!0,errorMessage:"活动开始时间不能为空"}]},endTime:{rules:[{required:!0,errorMessage:"活动结束时间不能为空"}]}}}},onLoad:function(e){var n=this,a=this;t.getStorage({key:"userInfo",success:function(i){a.userInfo=i.data,a.status=e.status,1==e.status&&t.request({url:"http://124.71.170.100/index.php/index/getActivityInfo",method:"GET",data:{activityId:e.id},success:function(t){if(console.log("获取用户信息",t),console.log("startTime:",n.changeTime(t.data.startTime)),a.customFormData.name=t.data.activityName,a.customFormData.activityId=e.id,a.customFormData.intro=t.data.intro,a.last_startTime=t.data.startTime,a.last_endTime=t.data.endTime,a.customFormData.startTime=n.changeTime(t.data.startTime),a.customFormData.endTime=n.changeTime(t.data.endTime),a.customFormData.slogan=t.data.slogan,""!=t.data.picture){var i={url:t.data.picture};n.customFormData.picture.push(i)}}})}})},methods:{submit:function(e,n){var a=this;this.$refs[e].validate().then((function(e){0!=a.customFormData.picture.length&&(console.log("success",e),1==a.status?t.request({url:"http://124.71.170.100/index.php/index/editActivity",header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",data:{activityName:a.customFormData.name,intro:a.customFormData.intro,picture:null==a.customFormData.picture||0==a.customFormData.picture.length?"":a.customFormData.picture[0].url,merchantId:a.userInfo.id,activityId:a.customFormData.activityId,slogan:a.customFormData.slogan,startTime:a.changeTime(a.last_startTime)==a.customFormData.startTime?a.last_startTime:a.customFormData.startTime,endTime:a.changeTime(a.last_endTime)==a.customFormData.endTime?a.last_endTime:a.customFormData.endTime},success:function(e){console.log(e),t.navigateBack(),t.showToast({title:"提交成功",mask:!0})}}):t.request({url:"http://124.71.170.100/index.php/index/addActivity",header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",data:{activityName:a.customFormData.name,intro:a.customFormData.intro,picture:null==a.customFormData.picture||0==a.customFormData.picture.length?"":a.customFormData.picture[0].url,merchantId:a.userInfo.id,slogan:a.customFormData.slogan,startTime:a.customFormData.startTime,endTime:a.customFormData.endTime},success:function(e){console.log(e),t.navigateBack(),t.showToast({title:"提交成功",mask:!0})}}))}))},checkTime:function(t){return t<10&&(t="0"+t),t},changeTime:function(t){var e=new Date(1*t),n=e.getFullYear(),a=e.getMonth()+1,i=(t=e.getDate(),e.getDay(),e.getHours()),o=e.getMinutes(),r=e.getSeconds();i=this.checkTime(i),o=this.checkTime(o),r=this.checkTime(r);return n+"-"+a+"-"+t+" "+i+":"+o+":"+r},selectImage:function(t){var e=this;console.log("选择图片",t),e.$OBS.myUploadFile((new Date).getTime()+t.tempFiles[0].name,t.tempFilePaths[0],t.tempFiles[0].fileType,"se-activity").then((function(t){console.log("success",t),e.customFormData.picture=[];var n={url:t};e.customFormData.picture.push(n)}))}}};e.default=n}).call(this,n("543d")["default"])},be27:function(t,e,n){"use strict";var a=n("d451"),i=n.n(a);i.a},c78a:function(t,e,n){"use strict";n.r(e);var a=n("6ab8"),i=n("f361");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("be27");var r,u=n("f0c5"),s=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=s.exports},d451:function(t,e,n){},f361:function(t,e,n){"use strict";n.r(e);var a=n("81f8"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a}},[["7256","common/runtime","common/vendor"]]]);