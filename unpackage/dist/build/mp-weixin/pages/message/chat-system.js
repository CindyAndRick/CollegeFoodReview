(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/message/chat-system"],{"0499":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={data:function(){return{msgType:"info",messageText:"系统信息加载中",systemUrl:"https://img0.baidu.com/it/u=1295072258,3925203567&fm=253&fmt=auto&app=138&f=JPEG?w=640&h=427",pattern:"1",myInfor:{id:"0",url:""},activityList:[{merchantId:"0",merchantNickName:"0",merchantAvatarUrl:"1",detail:"1",time:"1"}],friendList:[{friendId:"0",friendNickName:"0",friendAvatarUrl:"0",result:"0",time:"0"}],appealList:[{result:"0",time:"0"}],reportList:[{targetId:"0",NickName:"0",AvatarUrl:"0",isUserOrComment:"0",result:"0",time:"0"}],showList:[],content:"",idList:[]}},onLoad:function(i){var e=this;this.myInfor.id=i.id,this.pattern=i.pattern,console.log("参数传递成功+id:"+i.id),console.log("参数传递成功+pattern:"+i.pattern);var s=this;t.getStorage({key:"userInfo",success:function(t){console.log(t.data.avatarUrl),s.myInfor.url=t.data.avatarUrl}}),t.request({url:"http://124.71.170.100/index.php/index/getSystemMessage",method:"GET",data:{id:this.myInfor.id},success:function(i){console.log("获取对话信息成功"+i.data.data),e.activityList=i.data.data.activityList,e.friendList=i.data.data.friendList,e.appealList=i.data.data.appealList,e.reportList=i.data.data.reportList,e.setShowValue(e.pattern),setTimeout((function(){t.pageScrollTo({scrollTop:999999,duration:0}),e.$refs.message.open()}),500)},fail:function(){console.log("获取对话信息失败")}})},methods:{down:function(){t.pageScrollTo({scrollTop:999999,duration:0})},send:function(){var i=this;this.content?(t.showLoading({title:"正在发送"}),setTimeout((function(){t.hideLoading();var e={id:i.myInfor.id,content:i.content,url:i.myInfor.url};i.showList.push(e),i.$nextTick((function(){i.content="",t.pageScrollTo({scrollTop:999999,duration:0})}))}),200)):t.showToast({title:"请输入有效的内容",icon:"none"})},setShowValue:function(t){if("0"==t)for(var i=0;i<this.activityList.length;i++){this.idList.push(this.activityList[i].merchantId),this.activityList[i].startTime=this.changeTime(this.activityList[i].startTime),this.activityList[i].endTime=this.changeTime(this.activityList[i].endTime);var e=this.activityList[i].merchantNickName+" 邀请您参加 "+this.activityList[i].activityName+"  (a)活动详情："+this.activityList[i].detail+"  (b)活动时间："+this.activityList[i].startTime+"-"+this.activityList[i].endTime,s={id:"0",content:e,url:this.activityList[i].merchantAvatarUrl};this.showList.push(s)}else if("1"==t)for(var n=0;n<this.friendList.length;n++){this.idList.push(this.friendList[n].friendId),this.friendList[n].time=this.changeTime(this.friendList[n].time);var a=void 0;a=1==this.friendList[n].result?this.friendList[n].friendNickName+" 于 "+this.friendList[n].time+" 同意了你的好友申请":this.friendList[n].friendNickName+" 于 "+this.friendList[n].time+" 拒绝了你的好友申请";var r={id:"0",content:a,url:this.friendList[n].friendAvatarUrl};this.showList.push(r)}else if("2"==t)for(var o=0;o<this.appealList.length;o++){this.appealList[o].time=this.changeTime(this.appealList[o].time);var c=void 0;c=1==this.appealList[o].result?"您的用户申诉 于 "+this.appealList[o].time+"  被管理员同意，您已经解封！":"您的用户申诉 于 "+this.appealList[o].time+"  被管理员拒绝，如有异议请再次提交~";var u={id:"0",content:c,url:this.systemUrl};this.showList.push(u)}else if("3"==t)for(var h=0;h<this.reportList.length;h++){var l=void 0;this.reportList[h].time=this.changeTime(this.reportList[h].time),l=1==this.reportList[h].isUserOrComment?1==this.reportList[h].result?"您于 "+this.reportList[h].time+" 提交的针对用户 "+this.reportList[h].nickName+"的评论 的举报信息已经被管理员受理，并确定为有效，已对该评论进行处理":"您于 "+this.reportList[h].time+" 提交的针对用户 "+this.reportList[h].nickName+"的评论 的举报信息已经被管理员受理，并确定为无效，如有异议请再次提交":1==this.reportList[h].result?"您于 "+this.reportList[h].time+" 提交的针对用户 "+this.reportList[h].nickName+" 的举报信息已经被管理员受理，并确定为有效，已对该用户进行处理":"您于 "+this.reportList[h].time+" 提交的针对用户 "+this.reportList[h].nickName+" 的举报信息已经被管理员受理，并确定为无效，如有异议请再次提交";var d={id:"0",content:l,url:this.systemUrl};this.showList.push(d)}},checkTime:function(t){return t<10&&(t="0"+t),t},changeTime:function(t){var i=new Date(1*t),e=i.getFullYear(),s=i.getMonth()+1,n=(t=i.getDate(),i.getDay(),i.getHours()),a=i.getMinutes(),r=i.getSeconds();n=this.checkTime(n),a=this.checkTime(a),r=this.checkTime(r);return e+"-"+s+"-"+t+" "+n+":"+a+":"+r},toHomePage:function(i){if(this.idList.length>=i){var e,s=this.idList[i];console.log(i),console.log("Id:"+s),t.request({url:"http://124.71.170.100/index.php/index/getUserIdentity",method:"GET",data:{id:s},success:function(i){console.log(i),e=i.data.data.identity,console.log(e),"1"==e?t.navigateTo({url:"/pages/home/homepage?id="+s}):"2"==e&&t.navigateTo({url:"/pages/index/store?id="+s})},fail:function(){console.log("获取身份失败")}})}}}};i.default=e}).call(this,e("543d")["default"])},"531e":function(t,i,e){"use strict";e.r(i);var s=e("0499"),n=e.n(s);for(var a in s)"default"!==a&&function(t){e.d(i,t,(function(){return s[t]}))}(a);i["default"]=n.a},5877:function(t,i,e){"use strict";e.r(i);var s=e("b8d5"),n=e("531e");for(var a in n)"default"!==a&&function(t){e.d(i,t,(function(){return n[t]}))}(a);e("8516");var r,o=e("f0c5"),c=Object(o["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],r);i["default"]=c.exports},8516:function(t,i,e){"use strict";var s=e("b0e6"),n=e.n(s);n.a},b0e6:function(t,i,e){},b8d5:function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return s}));var s={uniPopup:function(){return e.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(e.bind(null,"347b"))},uniPopupMessage:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-popup/components/uni-popup-message/uni-popup-message")]).then(e.bind(null,"4c7c"))}},n=function(){var t=this,i=t.$createElement;t._self._c},a=[]},e66e:function(t,i,e){"use strict";(function(t){e("4a2a");s(e("66fd"));var i=s(e("5877"));function s(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(i.default)}).call(this,e("543d")["createPage"])}},[["e66e","common/runtime","common/vendor"]]]);