(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/message/message"],{1174:function(e,t,n){"use strict";n.r(t);var a=n("a799"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},24578:function(e,t,n){"use strict";var a=n("b26d"),i=n.n(a);i.a},"7a62":function(e,t,n){"use strict";n.r(t);var a=n("e727"),i=n("1174");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("24578");var s,r=n("f0c5"),c=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);t["default"]=c.exports},a799:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{userInfo:{},active:"",animate:"zoomIn",height:"",tabbarHeight:"",tabbar_user:[{name:"index",text:"首页",icon:"../../static/icons/rank.png"},{name:"moments",text:"动态",icon:"../../static/icons/explore.png"},{name:"message",text:"消息",icon:"../../static/icons/message-active.png"},{name:"home",text:"我的",icon:"../../static/icons/homepage.png"}],tabbar_merchant:[{name:"index",text:"首页",icon:"../../static/icons/rank.png"},{name:"message",text:"消息",icon:"../../static/icons/message-active.png"},{name:"homepage",text:"我的",icon:"../../static/icons/homepage.png"}],tabbar_admin:[{name:"index",text:"首页",icon:"../../static/icons/rank.png"},{name:"manage",text:"管理",icon:"../../static/icons/cube-active.png"},{name:"canteen",text:"食堂",icon:"../../static/icons/edit.png"}],myInfo:{myId:"50"},systemId:"20",isShowContent:!1,contentSystem:{contentnomore:"快去添加系统消息吧"},messageList:[],contentDown:{contentnomore:"没有更多对话啦"},systemMessage:[{otherUserId:"1",nickName:"活动通知",remark:"活动通知",avatarUrl:"../../../../static/icons/activitySystem.jpg",lastChatTime:"2022.5.22",lastChatContent:"🏀"},{otherUserId:"1",nickName:"好友申请通知",remark:"好友申请通知",avatarUrl:"../../../../static/icons/friendSystem.jpg",lastChatTime:"2022.5.22",lastChatContent:"🏸"},{otherUserId:"1",nickName:"申诉通知",remark:"申诉通知",avatarUrl:"../../../../static/icons/appealSystem.jpg",lastChatTime:"2022.5.22",lastChatContent:"🏓"}]}},onShow:function(){wx.hideHomeButton();var t=this;e.getStorage({key:"userInfo",success:function(n){t.userInfo=n.data,t.myInfo.myId=n.data.id,e.request({url:"http://124.71.170.100/index.php/index/getChatList",method:"GET",data:{id:t.myInfo.myId},success:function(e){console.log("获取对话信息成功"+e.data.data),t.messageList=e.data.data.messageList;for(var n=0;n<t.messageList.length;n++)t.messageList[n].lastChatTime=t.changeTime(t.messageList[n].lastChatTime)},fail:function(){console.log("获取对话信息失败")}})}})},methods:{handleChange:function(t){if(console.log("change::",t),0==this.userInfo.identity)switch(t.name){case"index":e.redirectTo({url:"../index/index"});break;case"moments":e.redirectTo({url:"../moments/moments"});break;case"home":e.redirectTo({url:"../home/my"});break;default:break}else if(1==this.userInfo.identity)switch(t.name){case"index":e.redirectTo({url:"/pages/index/index"});break;case"moments":e.redirectTo({url:"/pages/moments/moments"});break;case"home":e.redirectTo({url:"/pages/home/my"});break;default:break}else if(2==this.userInfo.identity)switch(t.name){case"index":e.redirectTo({url:"/pages/index/index"});break;case"homepage":e.redirectTo({url:"/pages/merchant-pages/store-homepage"});break;default:break}},chatClick:function(t){console.log("跳转至聊天界面"),e.navigateTo({url:"/pages/message/chat?id="+this.myInfo.myId+"&otherUserId="+t.otherUserId})},systemClick:function(t){console.log("跳转至系统通知界面"),e.navigateTo({url:"/pages/message/chat-system?id="+this.myInfo.myId+"&pattern="+t})},checkTime:function(e){return e<10&&(e="0"+e),e},changeTime:function(e){var t=new Date(1*e),n=t.getFullYear(),a=t.getMonth()+1,i=(e=t.getDate(),t.getDay(),t.getHours()),o=t.getMinutes(),s=t.getSeconds();i=this.checkTime(i),o=this.checkTime(o),s=this.checkTime(s);return n+"-"+a+"-"+e+" "+i+":"+o+":"+s}}};t.default=n}).call(this,n("543d")["default"])},b26d:function(e,t,n){},e727:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={uniList:function(){return n.e("uni_modules/uni-list/components/uni-list/uni-list").then(n.bind(null,"7154"))},uniListChat:function(){return n.e("uni_modules/uni-list/components/uni-list-chat/uni-list-chat").then(n.bind(null,"69c9"))},uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,"b4b9"))},lbTabbar:function(){return Promise.all([n.e("common/vendor"),n.e("components/lb-tabbar/lb-tabbar")]).then(n.bind(null,"b226"))},lbTabbarItem:function(){return Promise.all([n.e("common/vendor"),n.e("components/lb-tabbar/lb-tabbar-item")]).then(n.bind(null,"26a2"))}},i=function(){var e=this,t=e.$createElement;e._self._c},o=[]},f001:function(e,t,n){"use strict";(function(e){n("4a2a");a(n("66fd"));var t=a(n("7a62"));function a(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])}},[["f001","common/runtime","common/vendor"]]]);