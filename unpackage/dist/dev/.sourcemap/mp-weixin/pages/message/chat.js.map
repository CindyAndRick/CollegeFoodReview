{"version":3,"sources":["uni-app:///main.js","webpack:///D:/TongJi/大二下/软件工程/给甲方打工/前端苦力/college-food-review/CollegeReviewProject/pages/message/chat.vue?1c3c","webpack:///D:/TongJi/大二下/软件工程/给甲方打工/前端苦力/college-food-review/CollegeReviewProject/pages/message/chat.vue?0ee2","webpack:///D:/TongJi/大二下/软件工程/给甲方打工/前端苦力/college-food-review/CollegeReviewProject/pages/message/chat.vue?6551","webpack:///D:/TongJi/大二下/软件工程/给甲方打工/前端苦力/college-food-review/CollegeReviewProject/pages/message/chat.vue?f8c8","uni-app:///pages/message/chat.vue","webpack:///D:/TongJi/大二下/软件工程/给甲方打工/前端苦力/college-food-review/CollegeReviewProject/pages/message/chat.vue?652a","webpack:///D:/TongJi/大二下/软件工程/给甲方打工/前端苦力/college-food-review/CollegeReviewProject/pages/message/chat.vue?fdc4"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACc;;;AAGjE;AAC4L;AAC5L,gBAAgB,uLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,aAAa,sWAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAA8tB,CAAgB,gqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8BlvB;AACA,MADA,kBACA;AACA;;AAEA;AACA,qBAHA;AAIA,4BAJA;;AAMA;AACA;AACA;AACA;AACA;AAHA,OAPA;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AALA,OAdA;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AALA,OAvBA;;AA+BA;AACA,iBAhCA;;AAkCA,GApCA;AAqCA,QArCA,kBAqCA,MArCA,EAqCA;;AAEA;AACA;AACA,2CAJA,CAIA;AACA;;AAEA;AACA;AACA,8DADA;AAEA,mBAFA;AAGA;AACA,qBADA;AAEA,uCAFA,EAHA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAdA;AAeA;AACA;AACA,OAjBA;;;AAoBA;AACA;AACA,gEADA;AAEA,mBAFA;AAGA;AACA,qBADA;AAEA,uCAFA,EAHA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA,6BADA,EACA;AACA,uBAFA;;AAIA,oCAJA,CADA,CAKA;AACA,SANA,EAMA,GANA;AAOA,OAlBA;AAmBA;AACA;AACA,OArBA,GArBA;;;AA6CA;AACA;AACA;AACA;AACA,kEADA;AAEA,qBAFA;AAGA;AACA,yBADA;AAEA,+CAFA,EAHA;;AAOA;AACA;AACA;AACA;AACA,+BADA,EACA;AACA,yBAFA;;AAIA;AACA;AACA;AACA,SAjBA;AAkBA;AACA;AACA,SApBA;;AAsBA,KAxBA,EAwBA,IAxBA,CA9CA;AAuEA,GApHA;AAqHA;AACA;AACA,QAFA,kBAEA;AACA;AACA,yBADA;AAEA,mBAFA;;AAIA,KAPA;AAQA;AACA,QATA,kBASA;AACA;AACA;AACA;AACA,2BADA;AAEA,sBAFA;;AAIA;AACA,OANA,MAMA;AACA;AACA;AACA,uBADA;AAEA,oBAFA;;;AAKA;AACA;AACA,0BADA;AAEA,iCAFA;AAGA,sCAHA;;;AAMA;AACA;AACA,kEADA;AAEA,wBAFA;AAGA;AACA,8CADA,EAHA;;AAMA;AACA,4BADA,EACA;AACA,kDAFA,EAEA;AACA,mCAHA,EAGA;AACA,wCAJA,CAIA;AAJA,WANA;AAYA;AACA;AACA;AACA;AACA;AACA,wEADA;AAEA,2BAFA;AAGA;AACA,gCADA;AAEA,sDAFA,EAHA;;AAOA;AACA;AACA;AACA;AACA,qCADA,EACA;AACA,+BAFA;;AAIA;AACA;AACA;AACA,uCADA,EACA;AACA,iCAFA;;AAIA,mBALA;AAMA;AACA;AACA;AACA,eAxBA;AAyBA;AACA;AACA,eA3BA;;AA6BA,WA7CA;AA8CA;AACA;AACA,WAhDA;;AAkDA;AACA,KAnFA;AAoFA;AACA,gBArFA,wBAqFA,EArFA,EAqFA;AACA;AACA,wCADA;;AAGA,KAzFA;AA0FA;AACA,aA3FA,qBA2FA,CA3FA,EA2FA;AACA;AACA;AACA;AACA;AACA,KAhGA;AAiGA,cAjGA,sBAiGA,IAjGA,EAiGA;AACA;AACA;AACA,oCADA;AAEA,8BAFA;AAGA,4BAHA;AAIA,4BAJA;AAKA,8BALA;AAMA,8BANA;AAOA,2BAPA;AAQA,2BARA;AASA,2BATA;AAUA;AACA,KA9GA;AA+GA;AACA,cAhHA,sBAgHA,EAhHA,EAgHA;AACA;AACA;AACA;AACA;AACA,oEAFA;AAGA,qBAHA;AAIA;AACA,gBADA,EAJA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,wBAFA;AAGA,iCAHA;;AAKA;AACA;AAPA,eAQA;AACA;AACA,oDADA;;AAGA;AACA;AALA,iBAMA;AACA;AACA,oDADA;;AAGA;AACA,SA/BA;AAgCA;AACA;AACA,SAlCA;;AAoCA,KAvJA,EArHA,E;;;;;;;;;;;;;AC9BA;AAAA;AAAA;AAAA;AAA62C,CAAgB,urCAAG,EAAC,C;;;;;;;;;;;ACAj4C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/message/chat.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/message/chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chat.vue?vue&type=template&id=042db559&\"\nvar renderjs\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/message/chat.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=template&id=042db559&\"","var components\ntry {\n  components = {\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    uniPopupMessage: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup-message/uni-popup-message\" */ \"@/uni_modules/uni-popup/components/uni-popup-message/uni-popup-message.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"","<!--私聊页面-->\r\n<template>\r\n\t<view>\r\n\t\t<uni-popup ref=\"message\" type=\"message\">\r\n\t\t\t<uni-popup-message :type=\"msgType\" :message=\"messageText\" :duration=\"1200\"></uni-popup-message>\r\n\t\t</uni-popup>\r\n\t\t<view class=\"box-1\" id=\"list-box\">\r\n\t\t\t<view class=\"talk-list\">\r\n\t\t\t\t<view v-for=\"(item,index) in talkList\" :key=\"index\" :id=\"`msg-${item.id}`\">\r\n\t\t\t\t\t<view class=\"item flex_col\" :class=\" item.id == my.id ? 'push':'pull' \">\r\n\t\t\t\t\t\t<image :src=\"item.id == my.id? my.myAvatarUrl :friend.otherAvatarUrl\" mode=\"aspectFill\"\r\n\t\t\t\t\t\t\tclass=\"pic\" @click=\"toHomePage(item.id)\"></image>\r\n\t\t\t\t\t\t<view class=\"content\">{{item.content}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"box-2\">\r\n\t\t\t<view class=\"flex_col\">\r\n\t\t\t\t<view class=\"flex_grow\">\r\n\t\t\t\t\t<input type=\"text\" class=\"content\" maxlength=\"100\" v-model=\"content\" placeholder=\"请输入聊天内容\"\r\n\t\t\t\t\t\tplaceholder-style=\"color:#DDD;\" :cursor-spacing=\"6\">\r\n\t\t\t\t</view>\r\n\t\t\t\t<button class=\"send\" @tap=\"send\">发送</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\r\n\t\t\t\t//页面加载头部信息\r\n\t\t\t\tmsgType: 'info',\r\n\t\t\t\tmessageText: '聊天信息加载中',\r\n\r\n\t\t\t\t// 我的基本信息\r\n\t\t\t\tmy: {\r\n\t\t\t\t\t// \tid:'20',\r\n\t\t\t\t\t// \tmyNickName:\"\",\r\n\t\t\t\t\t// \tmyAvatarUrl:'https://img0.baidu.com/it/u=1295072258,3925203567&fm=253&fmt=auto&app=138&f=JPEG?w=640&h=427'\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// 对方基本信息\r\n\t\t\t\tfriend: {\r\n\t\t\t\t\t// \totherUserId:'1',\r\n\t\t\t\t\t// \totherNickName:\"\",\r\n\t\t\t\t\t// \totherRemark:\"\",\r\n\t\t\t\t\t// \totherAvatarUrl:'https://img2.baidu.com/it/u=2630063864,152433897&fm=253&fmt=auto&app=138&f=JPEG?w=750&h=500'\r\n\t\t\t\t\t// \r\n\t\t\t\t},\r\n\r\n\t\t\t\t// 聊天数据\r\n\t\t\t\ttalkList: [\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \tid:'1',\r\n\t\t\t\t\t// \tcontent:'1',\r\n\t\t\t\t\t// \ttime:'1'\r\n\t\t\t\t\t// },\r\n\t\t\t\t],\r\n\r\n\t\t\t\t// 临时添加聊天数据\r\n\t\t\t\tcontent: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\r\n\t\t\t//获取上个页面参数\r\n\t\t\tthis.my.id = option.id;\r\n\t\t\tconsole.log('参数传递成功+myId:', option.id); //控制台显示结果\r\n\t\t\tthis.friend.otherUserId = option.otherUserId;\r\n\r\n\t\t\t    // 获取对话信息\r\n\t\t\t    uni.request({\r\n\t\t\t\t\turl: 'http://124.71.170.100/index.php/index/getChatInfo',\r\n\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tid: option.id,\r\n\t\t\t\t\t\totherUserId: option.otherUserId\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('获取对话信息成功', res.data.data);\r\n\t\t\t\t\t\tthis.my.myNickName = res.data.data.myNickName;\r\n\t\t\t\t\t\tthis.my.myAvatarUrl = res.data.data.myAvatarUrl;\r\n\t\t\t\t\t\tthis.friend.otherNickName = res.data.data.otherNickName;\r\n\t\t\t\t\t\tthis.friend.otherAvatarUrl = res.data.data.otherAvatarUrl;\r\n\t\t\t\t\t\tthis.friend.otherRemark = res.data.data.otherRemark;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tconsole.log('获取对话信息失败');\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\r\n\t\t\t\t// 获取聊天内容\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'http://124.71.170.100/index.php/index/getChatRecord',\r\n\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tid: option.id,\r\n\t\t\t\t\t\totherUserId: option.otherUserId\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('获取对话成功');\r\n\t\t\t\t\t\tthis.talkList = res.data.data.msgList;\r\n\t\t\t\t\t\t// 初入页面翻到底页\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\t\t\t\tscrollTop: 999999, // 设置一个超大值，以保证滚动条滚动到底部\r\n\t\t\t\t\t\t\t\t\tduration: 0\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tthis.$refs.message.open() // 聊天信息获取提示\r\n\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tconsole.log('获取对话失败');\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\r\n\t\t\t\t// 每隔1.5s刷新聊天记录\r\n\t\t\t\tthis.timer = setInterval(() => {\r\n\t\t\t\t\t// 获取聊天内容\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: 'http://124.71.170.100/index.php/index/getChatRecord',\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tid: this.my.id,\r\n\t\t\t\t\t\t\totherUserId: this.friend.otherUserId\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t//console.log('更新对话成功');\r\n\t\t\t\t\t\t\tif (this.talkList.length != res.data.data.msgList.length) {\r\n\t\t\t\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\t\t\t\tscrollTop: 999999, // 设置一个超大值，以保证滚动条滚动到底部\r\n\t\t\t\t\t\t\t\t\tduration: 0\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.talkList = res.data.data.msgList;\r\n\t\t\t\t\t\t\t\tconsole.log('此时更新')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\tconsole.log('获取对话失败');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 1500)\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 移动至聊天尾部\r\n\t\t\tdown() {\r\n\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\tscrollTop: 999999,\r\n\t\t\t\t\tduration: 0\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 发送信息\r\n\t\t\tsend() {\r\n\t\t\t\t// 错误处理\r\n\t\t\t\tif (!this.content) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入有效的内容',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 显示正在发送标签\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '正在发送',\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\t// 产生现在的聊天数据\r\n\t\t\t\t\tlet dataTemp = {\r\n\t\t\t\t\t\t\"id\": this.my.id,\r\n\t\t\t\t\t\t\"content\": this.content,\r\n\t\t\t\t\t\t\"time\": new Date().getTime()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 将消息传递给后端\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: 'http://124.71.170.100/index.php/index/sendMessage',\r\n\t\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\"content-type\": \"application/json\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\"id\": this.my.id, //发送者ID\r\n\t\t\t\t\t\t\t\"otherUserId\": this.friend.otherUserId, //发送对象ID\r\n\t\t\t\t\t\t\t\"content\": this.content, //发送内容\r\n\t\t\t\t\t\t\t\"time\": new Date().getTime() //发送时间戳\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tconsole.log('提交成功', res);\r\n\t\t\t\t\t\t\t// 清空内容框中的内容\r\n\t\t\t\t\t\t\tthis.content = '';\r\n\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\turl: 'http://124.71.170.100/index.php/index/getChatRecord',\r\n\t\t\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\tid: this.my.id,\r\n\t\t\t\t\t\t\t\t\totherUserId: this.friend.otherUserId\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\t//console.log('更新对话成功');\r\n\t\t\t\t\t\t\t\t\tif (this.talkList.length != res.data.data.msgList.length) {\r\n\t\t\t\t\t\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\t\t\t\t\t\tscrollTop: 999999, // 设置一个超大值，以保证滚动条滚动到底部\r\n\t\t\t\t\t\t\t\t\t\t\tduration: 0\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\tthis.talkList = res.data.data.msgList;\r\n\t\t\t\t\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\t\t\t\t\t\t\tscrollTop: 999999, // 设置一个超大值，以保证滚动条滚动到底部\r\n\t\t\t\t\t\t\t\t\t\t\t\tduration: 0\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('此时更新')\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('获取对话失败');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\tconsole.log('提交失败');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 点击图片跳转至对应页面\r\n\t\t\tjumpHomePage(id) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../home/homepage?id=' + id,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 时间戳转标准时间显示\r\n\t\t\tcheckTime(i) {\r\n\t\t\t\tif (i < 10) {\r\n\t\t\t\t\ti = \"0\" + i;\r\n\t\t\t\t}\r\n\t\t\t\treturn i;\r\n\t\t\t},\r\n\t\t\tchangeTime(date) {\r\n\t\t\t\tvar nowdate = new Date(date * 1)\r\n\t\t\t\tvar year = nowdate.getFullYear(),\r\n\t\t\t\t\tmonth = nowdate.getMonth() + 1,\r\n\t\t\t\t\tdate = nowdate.getDate(),\r\n\t\t\t\t\tday = nowdate.getDay(),\r\n\t\t\t\t\th = nowdate.getHours(),\r\n\t\t\t\t\tm = nowdate.getMinutes(),\r\n\t\t\t\t\ts = nowdate.getSeconds(),\r\n\t\t\t\t\th = this.checkTime(h),\r\n\t\t\t\t\tm = this.checkTime(m),\r\n\t\t\t\t\ts = this.checkTime(s);\r\n\t\t\t\treturn year + \"-\" + month + \"-\" + date + \" \" + h + \":\" + m + \":\" + s;\r\n\t\t\t},\r\n\t\t\t// 页面跳转\r\n\t\t\ttoHomePage(Id) {\r\n\t\t\t\tconsole.log(\"Id:\" + Id);\r\n\t\t\t\tvar identity;\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\t//获取身份\r\n\t\t\t\t\turl: 'http://124.71.170.100/index.php/index/getUserIdentity',\r\n\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tid: Id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tidentity = res.data.data.identity;\r\n\t\t\t\t\t\tconsole.log(identity);\r\n\t\t\t\t\t\t//管理员\r\n\t\t\t\t\t\tif (identity == \"0\") {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\t\t\ttitle: \"无权进入管理员主页！\",\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//用户\r\n\t\t\t\t\t\telse if (identity == \"1\") {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: '/pages/home/homepage?id=' + Id\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//商家\r\n\t\t\t\t\t\telse if (identity == \"2\") {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: '/pages/index/store?id=' + Id\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tconsole.log('获取身份失败');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import \"../../global.scss\";\r\n\r\n\tpage {\r\n\t\tbackground-color: #F3F3F3;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\r\n\t/* 加载数据提示 */\r\n\t.tips {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: var(--window-top);\r\n\t\twidth: 100%;\r\n\t\tz-index: 9;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.15);\r\n\t\theight: 72rpx;\r\n\t\tline-height: 72rpx;\r\n\t\ttransform: translateY(-80rpx);\r\n\t\ttransition: transform 0.3s ease-in-out 0s;\r\n\r\n\t\t&.show {\r\n\t\t\ttransform: translateY(0);\r\n\t\t}\r\n\t}\r\n\r\n\t.box-1 {\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t\tpadding-bottom: 100rpx;\r\n\t\tbox-sizing: content-box;\r\n\r\n\t\t/* 兼容iPhoneX */\r\n\t\tmargin-bottom: 0;\r\n\t\tmargin-bottom: constant(safe-area-inset-bottom);\r\n\t\tmargin-bottom: env(safe-area-inset-bottom);\r\n\t}\r\n\r\n\t.box-2 {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\tbottom: 0;\r\n\t\theight: auto;\r\n\t\tz-index: 2;\r\n\t\tborder-top: #e5e5e5 solid 1px;\r\n\t\tbox-sizing: content-box;\r\n\t\tbackground-color: #F3F3F3;\r\n\r\n\t\t/* 兼容iPhoneX */\r\n\t\tpadding-bottom: 0;\r\n\t\tpadding-bottom: constant(safe-area-inset-bottom);\r\n\t\tpadding-bottom: env(safe-area-inset-bottom);\r\n\r\n\t\t>view {\r\n\t\t\tpadding: 0 20rpx;\r\n\t\t\theight: 100rpx;\r\n\t\t}\r\n\r\n\t\t.content {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\theight: 64rpx;\r\n\t\t\tpadding: 0 20rpx;\r\n\t\t\tborder-radius: 32rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t}\r\n\r\n\t\t.send {\r\n\t\t\tbackground-image: linear-gradient(to right, #efff9e 0%, #ffec8c 51%, #ffa9a1 100%);\r\n\t\t\tcolor: #fff;\r\n\t\t\theight: 64rpx;\r\n\t\t\tmargin-left: 20rpx;\r\n\t\t\tborder-radius: 32rpx;\r\n\t\t\tpadding: 0;\r\n\t\t\twidth: 120rpx;\r\n\t\t\tline-height: 62rpx;\r\n\r\n\t\t\t&:active {\r\n\t\t\t\tbackground-image: linear-gradient(to right, #efff9e 0%, #ffec8c 51%, #ffa9a1 100%);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.talk-list {\r\n\t\tpadding-bottom: 20rpx;\r\n\r\n\t\t/* 消息项，基础类 */\r\n\t\t.item {\r\n\t\t\tpadding: 20rpx 20rpx 0 20rpx;\r\n\t\t\talign-items: flex-start;\r\n\t\t\talign-content: flex-start;\r\n\t\t\tcolor: #333;\r\n\r\n\t\t\t.pic {\r\n\t\t\t\twidth: 92rpx;\r\n\t\t\t\theight: 92rpx;\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t\tborder: #fff solid 1px;\r\n\t\t\t}\r\n\r\n\t\t\t.content {\r\n\t\t\t\tpadding: 20rpx;\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t\tmin-width: 30rpx;\r\n\t\t\t\tmin-height: 87rpx;\r\n\t\t\t\tmax-width: 500rpx;\r\n\t\t\t\tword-break: break-all;\r\n\t\t\t\tline-height: 52rpx;\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\t\t\t/* 收到的消息 */\r\n\t\t\t&.pull {\r\n\t\t\t\t.content {\r\n\t\t\t\t\tmargin-left: 32rpx;\r\n\t\t\t\t\tbackground-color: #fff8f6;\r\n\r\n\t\t\t\t\t&::after {\r\n\t\t\t\t\t\tcontent: '';\r\n\t\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\t\twidth: 0;\r\n\t\t\t\t\t\theight: 0;\r\n\t\t\t\t\t\tborder-top: 16rpx solid transparent;\r\n\t\t\t\t\t\tborder-bottom: 16rpx solid transparent;\r\n\t\t\t\t\t\tborder-right: 20rpx solid #fff8f6;\r\n\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\ttop: 30rpx;\r\n\t\t\t\t\t\tleft: -18rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/* 发出的消息 */\r\n\t\t\t&.push {\r\n\t\t\t\t/* 主轴为水平方向，起点在右端。使不修改DOM结构，也能改变元素排列顺序 */\r\n\t\t\t\tflex-direction: row-reverse;\r\n\r\n\t\t\t\t.content {\r\n\t\t\t\t\tmargin-right: 32rpx;\r\n\t\t\t\t\tbackground-color: #dde9c9;\r\n\r\n\t\t\t\t\t&::after {\r\n\t\t\t\t\t\tcontent: '';\r\n\t\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\t\twidth: 0;\r\n\t\t\t\t\t\theight: 0;\r\n\t\t\t\t\t\tborder-top: 16rpx solid transparent;\r\n\t\t\t\t\t\tborder-bottom: 16rpx solid transparent;\r\n\t\t\t\t\t\tborder-left: 20rpx solid #dde9c9;\r\n\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\ttop: 30rpx;\r\n\t\t\t\t\t\tright: -18rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1654575658684\n      var cssReload = require(\"D:/MySoftware/HBuiderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}